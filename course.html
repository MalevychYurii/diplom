<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Diplom (test)</title>
    <link rel="stylesheet" href="./src/css/style/courseHTML/style.css" />
    <link rel="stylesheet" href="./src/css/nullstyle/nullstyle.css" />
</head>

<body>
    <header class="header">
        <div class="container">
            <nav class="header__nav">
                <div class="header__logo">
                    <a href="./index.html">
                        <img src="./src/img/logo.png" alt="Logo" class="header__logo-image" />
                    </a>
                </div>
                <div class="header__burger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <ul class="header__menu">
                    <li class="header__menu-item">
                        <a href="./about.html" class="header__link">Про нас</a>
                    </li>
                    <li class="header__menu-item">
                        <a href="./ourMission.html" class="header__link">Наша місія</a>
                    </li>
                    <li class="header__menu-item">
                        <a href="./contact.html" class="header__link">Контакти</a>
                    </li>
                    <li class="header__menu-item">
                        <a href="./learnProcess.html" class="header__link">Процес навчання</a>
                    </li>
                    <li class="header__menu-item">
                        <a href="./course.html" class="header__link">Курс</a>
                    </li>
                    <div class="header__actions">
                        <a href="" class="header__link header__link--registration">Зареєструватися</a>
                        <button type="button" class="header__button header__button--login">Увійти</button>

                        <!-- Місце для email користувача та кнопка виходу -->
                        <div id="user-email" class="header__user-info" style="display: none;">
                            <span id="user-email-display"></span> <!-- Для відображення email -->
                            <button id="logoutBtn" type="button"
                                class="header__button header__button--logout">Вийти</button>
                        </div>
                    </div>
                </ul>
            </nav>
        </div>
    </header>

    <main class="main">
        <section class="course">
            <div id="course-root"></div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer__content">
                <div class="footer__block">
                    <div class="footer__img">
                        <a href="./index.html"><img src="./src/img/logo.png" alt="Logo" /></a>
                    </div>
                    <div class="footer__item">
                        <ul>
                            <li><a href="">Про нас</a></li>
                            <li><a href="">Чому ви навчитесь?</a></li>
                            <li><a href="">Реєстрація</a></li>
                            <li><a href="">Локація</a></li>
                        </ul>
                    </div>
                    <div class="footer__item">
                        <div class="footer__contact">
                            <div class="footer__contact--title">Зв'язатись з нами:</div>
                            <div class="footer__contact--tel">
                                <a href="tel:+38050549921">+38 (050) 549 921</a>
                            </div>
                            <div class="footer__contact--mail">
                                <a href="mailto:test@gmail.com" target="_blank">test@gmail.com</a>
                            </div>
                        </div>
                    </div>
                    <div class="footer__item">
                        <div class="footer__social">
                            <ul class="footer__social--list">
                                <li class="footer__social--item">
                                    <a href="">
                                        <img src="./src/img/svg/footerSocial/linkedIn.svg" alt="linkedIn" />
                                    </a>
                                </li>
                                <li class="footer__social--item">
                                    <a href="">
                                        <img src="./src/img/svg/footerSocial/facebook.svg" alt="facebook" />
                                    </a>
                                </li>
                                <li class="footer__social--item">
                                    <a href="">
                                        <img src="./src/img/svg/footerSocial/telegram.svg" alt="telegram" />
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <a href="#" class="scroll-to-top" id="scrollToTop">&#8679;</a>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- React та Babel через CDN -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        function CourseApp() {
            const [activeSection, setActiveSection] = useState(null);
            const [activeSubsection, setActiveSubsection] = useState(null);
            const [activeTopic, setActiveTopic] = useState(null);
            const [quizMode, setQuizMode] = useState(false);
            const [quizType, setQuizType] = useState(null);
            const [quizIndex, setQuizIndex] = useState(0);
            const [activeListeningQuiz, setActiveListeningQuiz] = useState(null);
            const [quizQuestions, setQuizQuestions] = useState([]);
            const [score, setScore] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [activeTense, setActiveTense] = useState(null);
            const [activeSubtense, setActiveSubtense] = useState(null);

            const [results, setResults] = useState(() => {
                const raw = JSON.parse(localStorage.getItem("quizResults")) || {};
                if (!raw.words && Object.values(raw).every(val => typeof val === "number")) {
                    return { words: raw };
                }
                return raw;
            });

            const vocabularyData = {
                "Фрукти": [{ en: "apple", ua: "яблуко" }, { en: "banana", ua: "банан" }, { en: "orange", ua: "апельсин" }, { en: "grape", ua: "виноград" }, { en: "pear", ua: "груша" }, { en: "cherry", ua: "вишня" }, { en: "peach", ua: "персик" }, { en: "plum", ua: "слива" }, { en: "watermelon", ua: "кавун" }, { en: "melon", ua: "диня" }],
                "Тварини": [{ en: "cat", ua: "кіт" }, { en: "dog", ua: "пес" }, { en: "elephant", ua: "слон" }, { en: "lion", ua: "лев" }, { en: "tiger", ua: "тигр" }, { en: "rabbit", ua: "кролик" }, { en: "horse", ua: "кінь" }, { en: "cow", ua: "корова" }, { en: "sheep", ua: "вівця" }, { en: "goat", ua: "коза" }],
                "Професії": [{ en: "doctor", ua: "лікар" }, { en: "teacher", ua: "вчитель" }, { en: "engineer", ua: "інженер" }, { en: "nurse", ua: "медсестра" }, { en: "driver", ua: "водій" }, { en: "chef", ua: "шеф-кухар" }, { en: "actor", ua: "актор" }, { en: "artist", ua: "художник" }, { en: "musician", ua: "музикант" }, { en: "writer", ua: "письменник" }],
                "Кольори": [{ en: "red", ua: "червоний" }, { en: "blue", ua: "синій" }, { en: "green", ua: "зелений" }, { en: "yellow", ua: "жовтий" }, { en: "black", ua: "чорний" }, { en: "white", ua: "білий" }, { en: "pink", ua: "рожевий" }, { en: "purple", ua: "фіолетовий" }, { en: "orange", ua: "помаранчевий" }, { en: "brown", ua: "коричневий" }],
                "Частини тіла": [{ en: "head", ua: "голова" }, { en: "hand", ua: "рука" }, { en: "leg", ua: "нога" }, { en: "eye", ua: "око" }, { en: "ear", ua: "вухо" }, { en: "mouth", ua: "рот" }, { en: "nose", ua: "ніс" }, { en: "neck", ua: "шия" }, { en: "shoulder", ua: "плече" }, { en: "foot", ua: "стопа" }],
                "Одяг": [{ en: "shirt", ua: "сорочка" }, { en: "pants", ua: "штани" }, { en: "jacket", ua: "куртка" }, { en: "dress", ua: "сукня" }, { en: "shoes", ua: "взуття" }, { en: "coat", ua: "пальто" }, { en: "scarf", ua: "шарф" }, { en: "hat", ua: "капелюх" }, { en: "gloves", ua: "рукавички" }, { en: "socks", ua: "носки" }]
            };

            const grammarQuizData = [
                { question: "I ____ to the store yesterday.", options: ["went", "go", "gone", "going"], correct: "went" },
                { question: "They ____ a movie last night.", options: ["watched", "watch", "watching", "watches"], correct: "watched" },
                { question: "She ____ her homework two hours ago.", options: ["finished", "finishes", "finishing", "finish"], correct: "finished" },
                { question: "We ____ dinner at 8 PM.", options: ["had", "have", "has", "having"], correct: "had" },
                { question: "He ____ a book when I called him.", options: ["read", "reads", "reading", "rode"], correct: "read" }
            ];

            const grammarContinuousQuizData = [
                { question: "They ____ TV when I called.", options: ["were watching", "watched", "watch", "watching"], correct: "were watching" },
                { question: "She ____ dinner at 7 PM.", options: ["was cooking", "cooked", "cooking", "cook"], correct: "was cooking" },
                { question: "We ____ football at this time yesterday.", options: ["were playing", "played", "play", "are playing"], correct: "were playing" },
                { question: "It ____ when I looked out the window.", options: ["was raining", "rained", "raining", "rains"], correct: "was raining" },
                { question: "He ____ on the phone while I was reading.", options: ["was talking", "talked", "talking", "talks"], correct: "was talking" }
            ];

            const grammarPerfectQuizData = [
                { question: "They ____ finished the work before I arrived.", options: ["had", "have", "has", "having"], correct: "had" },
                { question: "She ____ already left when he called.", options: ["had", "have", "has", "having"], correct: "had" },
                { question: "By the time we got there, the concert ____ started.", options: ["had", "have", "has", "having"], correct: "had" },
                { question: "I ____ seen that movie before last night.", options: ["had", "have", "has", "having"], correct: "had" },
                { question: "He ____ studied for two hours before the test.", options: ["had", "have", "has", "having"], correct: "had" }
            ];

            const grammarPerfectContinuousQuizData = [
                {
                    question: "They ____ been waiting for an hour when the bus finally arrived.",
                    options: ["had", "have", "had been", "has been"],
                    correct: "had been"
                },
                {
                    question: "She ____ been studying all morning before the exam.",
                    options: ["had", "had been", "have been", "has been"],
                    correct: "had been"
                },
                {
                    question: "By noon, we ____ been working since 6 AM.",
                    options: ["had", "had been", "have been", "has been"],
                    correct: "had been"
                },
                {
                    question: "I ____ been living here for ten years before I moved.",
                    options: ["had", "had been", "have been", "has been"],
                    correct: "had been"
                },
                {
                    question: "He ____ been playing football when it started to rain.",
                    options: ["had", "had been", "have been", "has been"],
                    correct: "had been"
                }
            ];

            const grammarTensesContent = {
                past: [
                    { name: 'Past Simple', description: 'Use for completed actions in the past. Structure: Subject + V2 (e.g., I walked to the store).' },
                    { name: 'Past Continuous', description: 'Use for actions in progress at a specific time in the past. Structure: Subject + was/were + V-ing (e.g., They were watching TV).' },
                    { name: 'Past Perfect', description: 'Use for an action completed before another past action. Structure: Subject + had + V3 (e.g., She had left before I arrived).' },
                    { name: 'Past Perfect Continuous', description: 'Use for duration of an action up to a point in the past. Structure: Subject + had been + V-ing (e.g., He had been working all day).' }
                ],
                present: [
                    { name: 'Present Simple', description: 'Use for habitual actions or general truths. Structure: Subject + V1(s) (e.g., She speaks English).' },
                    { name: 'Present Continuous', description: 'Use for actions happening now or around now. Structure: Subject + am/is/are + V-ing (e.g., I am reading a book).' },
                    { name: 'Present Perfect', description: 'Use for actions with relevance to the present. Structure: Subject + have/has + V3 (e.g., They have visited Paris).' },
                    { name: 'Present Perfect Continuous', description: 'Use for duration up to now. Structure: Subject + have/has been + V-ing (e.g., We have been waiting here).' }
                ],
                future: [
                    { name: 'Future Simple', description: 'Use for spontaneous decisions or predictions. Structure: Subject + will + V1 (e.g., I will call you later).' },
                    { name: 'Future Continuous', description: 'Use for actions in progress at a future time. Structure: Subject + will be + V-ing (e.g., She will be traveling tomorrow).' },
                    { name: 'Future Perfect', description: 'Use for actions that will be completed before a future time. Structure: Subject + will have + V3 (e.g., They will have finished by Monday).' },
                    { name: 'Future Perfect Continuous', description: 'Use for duration up to a future point. Structure: Subject + will have been + V-ing (e.g., He will have been working here for five years).' }
                ]
            };

            const presentSimpleQuizData = [
                { question: "She ____ to school every day.", options: ["goes", "go", "gone", "going"], correct: "goes" },
                { question: "I usually ____ coffee in the morning.", options: ["drink", "drinks", "drank", "drinking"], correct: "drink" },
                { question: "They ____ tennis on Sundays.", options: ["play", "plays", "playing", "played"], correct: "play" },
                { question: "He ____ the guitar well.", options: ["plays", "play", "played", "playing"], correct: "plays" },
                { question: "We ____ English at school.", options: ["study", "studies", "studying", "studied"], correct: "study" }
            ];

            const presentContinuousQuizData = [
                { question: "I ____ lunch right now.", options: ["am eating", "eat", "eating", "was eating"], correct: "am eating" },
                { question: "They ____ football at the moment.", options: ["are playing", "play", "playing", "played"], correct: "are playing" },
                { question: "She ____ a book now.", options: ["is reading", "reads", "reading", "read"], correct: "is reading" },
                { question: "We ____ to music at the party.", options: ["are listening", "listen", "listening", "listened"], correct: "are listening" },
                { question: "He ____ TV this evening.", options: ["is watching", "watches", "watching", "watched"], correct: "is watching" }
            ];

            const presentPerfectQuizData = [
                { question: "I ____ visited France twice.", options: ["have", "has", "had", "having"], correct: "have" },
                { question: "She ____ already finished her work.", options: ["has", "have", "had", "having"], correct: "has" },
                { question: "They ____ lived here since 2010.", options: ["have", "has", "had", "having"], correct: "have" },
                { question: "He ____ just eaten breakfast.", options: ["has", "have", "had", "having"], correct: "has" },
                { question: "We ____ never seen that movie.", options: ["have", "has", "had", "having"], correct: "have" }
            ];

            const presentPerfectContinuousQuizData = [
                { question: "She ____ been working all day.", options: ["has", "have", "had", "having"], correct: "has" },
                { question: "I ____ been waiting for two hours.", options: ["have", "has", "had", "having"], correct: "have" },
                { question: "They ____ been playing since morning.", options: ["have", "has", "have been", "has been"], correct: "have been" },
                { question: "He ____ been studying for three hours.", options: ["has been", "have been", "had been", "having been"], correct: "has been" },
                { question: "We ____ been learning English since January.", options: ["have", "has", "have been", "has been"], correct: "have been" }
            ];

            const grammarFutureSimpleQuizData = [
                { question: "I ____ call you tomorrow.", options: ["will", "am", "are", "do"], correct: "will" },
                { question: "She ____ finish her homework later.", options: ["will", "is", "does", "can"], correct: "will" },
                { question: "They ____ arrive next week.", options: ["will", "are", "have", "do"], correct: "will" },
                { question: "We ____ see each other soon.", options: ["will", "am", "are", "have"], correct: "will" },
                { question: "He ____ help you with that task.", options: ["will", "can", "do", "has"], correct: "will" }
            ];

            const grammarFutureContinuousQuizData = [
                { question: "At 8 PM tonight, I ____ cooking dinner.", options: ["will be", "will", "am", "been"], correct: "will be" },
                { question: "This time tomorrow, she ____ flying to Paris.", options: ["will be", "will", "is", "has"], correct: "will be" },
                { question: "They ____ playing cards when you arrive.", options: ["will be", "will", "are", "were"], correct: "will be" },
                { question: "He ____ be working at midnight.", options: ["will be", "will", "is", "was"], correct: "will be" },
                { question: "We ____ be having lunch at noon.", options: ["will be", "will", "are", "have"], correct: "will be" }
            ];

            const grammarFuturePerfectQuizData = [
                { question: "By 6 o'clock, I ____ finished my report.", options: ["will have", "will", "have", "had"], correct: "will have" },
                { question: "She ____ already left by the time we got there.", options: ["will have", "will", "has", "had"], correct: "will have" },
                { question: "By next week, they ____ completed the project.", options: ["will have", "will", "have", "had"], correct: "will have" },
                { question: "We ____ eaten dinner before the movie starts.", options: ["will have", "will", "have", "had"], correct: "will have" },
                { question: "He ____ written the email by this afternoon.", options: ["will have", "will", "has", "had"], correct: "will have" }
            ];

            const grammarFuturePerfectContinuousQuizData = [
                { question: "By next year, she ____ been working here for five years.", options: ["will have been", "will be", "has been", "will have"], correct: "will have been" },
                { question: "By 9 PM, I ____ been studying for three hours.", options: ["will have been", "will be", "have been", "will have"], correct: "will have been" },
                { question: "At that time tomorrow, they ____ been living in London for a decade.", options: ["will have been", "will be", "have been", "will have"], correct: "will have been" },
                { question: "By the time you arrive, we ____ been waiting for an hour.", options: ["will have been", "will be", "have been", "will have"], correct: "will have been" },
                { question: "By this weekend, he ____ been training all month.", options: ["will have been", "will be", "has been", "will have"], correct: "will have been" }
            ];

            const articlesQuizData = [
                { question: "I bought ___ apple yesterday.", options: ["a", "an", "the", "–"], correct: "an" },
                { question: "She read ___ book you gave her.", options: ["a", "an", "–", "the"], correct: "the" },
                { question: "___ cats are friendly pets.", options: ["A", "The", "–", "An"], correct: "–" },
                { question: "He wants to be ___ engineer when he grows up.", options: ["an", "a", "the", "–"], correct: "an" },
                { question: "We saw ___ movie you recommended.", options: ["a", "an", "the", "–"], correct: "the" },
            ];

            const grammarConditionalsQuizData = [
                { question: "If you heat ice, it ____.", options: ["melts", "melted", "will melt", "would melt"], correct: "melts" },           // zero
                { question: "If it rains tomorrow, we ____ at home.", options: ["will stay", "stay", "would stay", "stayed"], correct: "will stay" }, // first
                { question: "If I had a million dollars, I ____ a yacht.", options: ["would buy", "will buy", "buy", "bought"], correct: "would buy" }, // second
                { question: "If she had known, she ____ you.", options: ["would have called", "called", "will call", "would call"], correct: "would have called" }, // third
                { question: "If I were you, I ____ ask for help.", options: ["would", "will", "am", "was"], correct: "would" }                    // mixed
            ];

            const listeningData = {
                beginner: [
                    {
                        title: "At the Supermarket",
                        description: "Діалог покупця та касира в супермаркеті. Практикуємо лексику покупок і фрази для спілкування в магазині.",
                        audioUrl: "./src/audio/beginner/1.mp3",
                        quiz: [
                            { question: "Що купує покупець?", options: ["Молоко", "Хліб", "Фрукти", "Овочі"], correct: "Фрукти" },
                            { question: "Який напій він бере?", options: ["Сік", "Газована вода", "Кава", "Чай"], correct: "Сік" },
                            { question: "Чи користується він знижкою?", options: ["Так", "Ні"], correct: "Так" },
                            { question: "Якою картою він платить?", options: ["Кредитною", "Дебетовою", "Готівкою", "Подарунковою"], correct: "Дебетовою" },
                            { question: "Чи бере він пакет?", options: ["Так", "Ні"], correct: "Так" }
                        ]
                    },
                    {
                        title: "At the Bus Stop",
                        description: "Діалог між двома людьми, які чекають на автобус. Практикуємо лексику подорожей та громадського транспорту.",
                        audioUrl: "./src/audio/beginner/2.mp3",
                        quiz: [
                            { question: "Куди їде співрозмовник?", options: ["На роботу", "До школи", "У магазин", "У лікарню"], correct: "На роботу" },
                            { question: "Який номер автобуса вони чекають?", options: ["5", "7", "10", "12"], correct: "7" },
                            { question: "Як довго вже чекають?", options: ["5 хвилин", "10 хвилин", "15 хвилин", "20 хвилин"], correct: "10 хвилин" },
                            { question: "Чи запізнюється автобус?", options: ["Так", "Ні"], correct: "Так" },
                            { question: "Як співрозмовники планують їхати, якщо автобус не приїде?", options: ["На таксі", "Пішки", "На велосипеді", "На іншому автобусі"], correct: "На таксі" }
                        ]
                    },
                    {
                        title: "Weekend Plans",
                        description: "Розмова двох друзів про плани на вихідні. Практикуємо лексику вільного часу, планів і погодних умов.",
                        audioUrl: "./src/audio/beginner/3.mp3",
                        quiz: [
                            { question: "Що планують друзі робити у вихідні?", options: ["Їхати за місто", "Піти в кіно", "Залишитися вдома", "Працювати"], correct: "Їхати за місто" },
                            { question: "Яка буде погода за прогнозом?", options: ["Сонячна", "Дощова", "Хмарна", "Сніжна"], correct: "Сонячна" },
                            { question: "Яким видом транспорту вони планують користуватись?", options: ["Автобусом", "Поїздом", "Автомобілем", "Метро"], correct: "Автомобілем" },
                            { question: "Чи планують вони робити пікнік?", options: ["Так", "Ні"], correct: "Так" },
                            { question: "Коли вони збираються зустрітися?", options: ["У суботу вранці", "У неділю ввечері", "У суботу ввечері", "У п’ятницю ввечері"], correct: "У суботу вранці" }
                        ]
                    }
                ],
                advanced: [
                    {
                        title: "Healthy Lifestyle",
                        description: "Розмова про важливість здорового способу життя. Вивчаємо лексику про харчування, фізичну активність і здоров'я.",
                        audioUrl: "./src/audio/advanced/1.mp3",
                        quiz: [
                            { question: "Про що переважно йде мова?", options: ["Про спорт", "Про харчування", "Про навчання", "Про подорожі"], correct: "Про харчування" },
                            { question: "Скільки разів на тиждень радять займатися спортом?", options: ["2-3 рази", "5-6 разів", "Щодня", "Раз на тиждень"], correct: "2-3 рази" },
                            { question: "Що згадують як джерело вітамінів?", options: ["Фрукти та овочі", "М'ясо", "Хліб", "Молочні продукти"], correct: "Фрукти та овочі" },
                            { question: "Яку пораду дають щодо сну?", options: ["Спати мінімум 7 годин", "Спати не більше 5 годин", "Спати вдень", "Спати раз на два дні"], correct: "Спати мінімум 7 годин" },
                            { question: "Що є важливою частиною здорового способу життя?", options: ["Фізична активність", "Перегляд серіалів", "Використання гаджетів", "Відпочинок без руху"], correct: "Фізична активність" }
                        ]
                    },
                    {
                        title: "Job Interview Tips",
                        description: "Розмова про поради для успішного проходження співбесіди. Вивчаємо лексику професійного розвитку та техніки самопрезентації.",
                        audioUrl: "./src/audio/advanced/2.mp3",
                        quiz: [
                            { question: "Який перший крок рекомендують перед співбесідою?", options: ["Вивчити інформацію про компанію", "Одразу прийти без підготовки", "Запитати знайомих", "Прочитати новини"], correct: "Вивчити інформацію про компанію" },
                            { question: "Що радять одягнути на співбесіду?", options: ["Офіційний одяг", "Спортивний костюм", "Повсякденний одяг", "Джинси і футболку"], correct: "Офіційний одяг" },
                            { question: "Яку пораду дають щодо відповідей на запитання?", options: ["Бути чесним", "Говорити багато зайвого", "Уникати складних питань", "Відповідати коротко й несерйозно"], correct: "Бути чесним" },
                            { question: "Що потрібно зробити після співбесіди?", options: ["Надіслати лист подяки", "Забути про співбесіду", "Подзвонити другу", "Нічого не робити"], correct: "Надіслати лист подяки" },
                            { question: "Як потрібно поводитись під час співбесіди?", options: ["Бути впевненим і ввічливим", "Говорити агресивно", "Мовчати", "Перебивати співрозмовника"], correct: "Бути впевненим і ввічливим" }
                        ]
                    },
                    {
                        title: "Online Learning",
                        description: "Обговорення переваг та викликів онлайн-освіти. Вивчаємо лексику сучасних технологій та дистанційного навчання.",
                        audioUrl: "./src/audio/advanced/3.mp3",
                        quiz: [
                            { question: "Яку головну перевагу онлайн-навчання згадують?", options: ["Гнучкий графік", "Безкоштовне навчання", "Менше домашніх завдань", "Можливість уникати іспитів"], correct: "Гнучкий графік" },
                            { question: "Яку проблему в онлайн-навчанні обговорюють?", options: ["Брак мотивації", "Нестачу підручників", "Високі витрати", "Проблеми з транспортом"], correct: "Брак мотивації" },
                            { question: "Що допомагає бути успішним у дистанційному навчанні?", options: ["Самодисципліна", "Реклама курсів", "Гарне підключення до інтернету", "Вчитися тільки вночі"], correct: "Самодисципліна" },
                            { question: "Який інструмент найчастіше використовують для онлайн-уроків?", options: ["Відеоконференції", "Телефонні дзвінки", "Поштові листи", "Особисті зустрічі"], correct: "Відеоконференції" },
                            { question: "Яка порада надається для ефективного навчання вдома?", options: ["Планувати час", "Не використовувати розклад", "Навчатися без перерв", "Не записувати нотатки"], correct: "Планувати час" }
                        ]
                    }
                ]
            };

            const sections = {
                words: { title: 'Vocabulary', subsections: { vocabulary: 'Список тем', flashcards: 'Посилання для навчання' } },
                grammar: { title: 'Grammar', subsections: { tenses: 'Часи англійської мови', articles: 'Артиклі', conditionals: 'Умовні речення' } },
                listening: { title: 'Listening', subsections: { beginner: 'Аудіо для початківців', advanced: 'Аудіо для просунутих' } },
                grades: { title: 'Оцінки', subsections: {} }
            };

            const handleBack = () => {
                if (quizMode) return setQuizMode(false);
                if (activeSubtense) return setActiveSubtense(null);
                if (activeTense) return setActiveTense(null);
                if (activeTopic) return setActiveTopic(null);
                if (activeSubsection) return setActiveSubsection(null);
                setActiveSection(null);
            };

            const startQuiz = () => {
                const words = vocabularyData[activeTopic] || [];
                const shuffled = [...words].sort(() => 0.5 - Math.random()).slice(0, 10);
                const questions = shuffled.map(word => {
                    const incorrect = words.filter(w => w.en !== word.en).sort(() => 0.5 - Math.random()).slice(0, 3);
                    const options = [...incorrect.map(w => w.en), word.en].sort(() => 0.5 - Math.random());
                    return { question: word.ua, correct: word.en, options };
                });
                setQuizType('words');
                setQuizQuestions(questions);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startContinuousQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(grammarContinuousQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startPerfectContinuousQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(grammarPerfectContinuousQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startPerfectQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(grammarPerfectQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startTenseQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(grammarQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startPresentSimpleQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(presentSimpleQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startPresentContinuousQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(presentContinuousQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startPresentPerfectQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(presentPerfectQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startPresentPerfectContinuousQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(presentPerfectContinuousQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startFutureSimpleQuiz = () => {
                setQuizType("grammar");
                setQuizQuestions(grammarFutureSimpleQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startFutureContinuousQuiz = () => {
                setQuizType("grammar");
                setQuizQuestions(grammarFutureContinuousQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startFuturePerfectQuiz = () => {
                setQuizType("grammar");
                setQuizQuestions(grammarFuturePerfectQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startFuturePerfectContinuousQuiz = () => {
                setQuizType("grammar");
                setQuizQuestions(grammarFuturePerfectContinuousQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startArticlesQuiz = () => {
                setQuizType('grammar');
                setQuizQuestions(articlesQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startConditionalsQuiz = () => {
                setQuizType("grammar");
                setQuizQuestions(grammarConditionalsQuizData);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
            };

            const startListeningQuiz = (level, index) => {
                setQuizType('listening');
                setQuizQuestions(listeningData[level][index].quiz);
                setQuizIndex(0);
                setScore(0);
                setSelectedAnswer(null);
                setQuizMode(true);
                setActiveListeningQuiz(`${level}-${index}`); // запам'ятати який саме трек відкрив тест
            };

            const handleAnswer = selected => {
                if (selectedAnswer) return;
                setSelectedAnswer(selected);
                setTimeout(() => {
                    const correct = quizQuestions[quizIndex].correct;
                    const isCorrect = selected === correct;
                    if (isCorrect) setScore(prev => prev + 1);

                    if (quizIndex + 1 < quizQuestions.length) {
                        setQuizIndex(prev => prev + 1);
                        setSelectedAnswer(null);
                    } else {
                        const finalScore = score + (isCorrect ? 1 : 0);
                        const updatedResults = { ...results };
                        if (quizType === 'words') {
                            updatedResults.words = { ...(results.words || {}), [activeTopic]: finalScore };
                        } else if (quizType === 'grammar') {
                            updatedResults.grammar = { ...(results.grammar || {}), [activeSubtense]: finalScore };
                        } else if (quizType === 'listening') {
                            updatedResults.listening = { ...(results.listening || {}), [activeListeningQuiz]: finalScore };
                        }
                        setResults(updatedResults);
                        localStorage.setItem('quizResults', JSON.stringify(updatedResults));
                        alert(`Тест завершено! Ваш результат: ${finalScore} з ${quizQuestions.length}`);
                        setQuizMode(false);
                        if (quizType === 'words') setActiveTopic(null);
                        if (quizType === 'grammar') setActiveSubtense(null);
                        if (quizType === 'listening') setActiveListeningQuiz(null);
                        setSelectedAnswer(null);
                    }
                }, 1000);
            };

            const getListeningTitle = (key) => {
                const [level, indexStr] = key.split('-');
                const index = parseInt(indexStr, 10);

                if (listeningData[level] && listeningData[level][index]) {
                    return listeningData[level][index].title;
                }
                return key;
            };


            return (
                <div className="course">
                    {!activeSection && (
                        <div className="course__menu">
                            <h1 className="course__main-title">Ваш відділ знань</h1>
                            <p>Тут ми вчимо англійську крок за кроком, легко та з задоволенням. У кожному
                                розділі — нові теми, практичні завдання та інструменти для закріплення знань. Обирай: вивчай слова,
                                граматику, тренуй аудіювання чи розвивай навички мовлення. Усе, що потрібно для впевненого
                                спілкування
                                англійською — вже тут!</p>
                            {Object.entries(sections).map(([key, value]) => (
                                <button
                                    key={key}
                                    onClick={() => setActiveSection(key)}
                                    className="course__menu-item"
                                >
                                    {value.title}
                                </button>
                            ))}
                        </div>
                    )}


                    {activeSection === 'grades' && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>Оцінки</h2>
                            <ul>
                                {Object.entries(results).map(([category, topics]) => {
                                    let total;

                                    if (category === 'grammar') {
                                        total = 5;
                                    } else if (category === 'listening') {
                                        total = 5;
                                    } else {
                                        total = 10;
                                    }

                                    return (
                                        <li key={category}>
                                            <strong>{sections[category]?.title || (category === 'listening' ? 'Listening' : category)}</strong>
                                            <ul>
                                                {Object.entries(topics).map(([topic, score]) => (
                                                    <li key={topic}>
                                                        Тема: {category === 'listening' ? getListeningTitle(topic) : topic} — Оцінка: {score} / {total}
                                                    </li>
                                                ))}
                                            </ul>
                                        </li>
                                    );
                                })}
                            </ul>
                        </div>
                    )}

                    {activeSection && activeSection !== "grades" && !activeSubsection && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>{sections[activeSection].title}</h2>
                            <div className="course__submenu">
                                {Object.entries(sections[activeSection].subsections).map(([subKey, subTitle]) => (
                                    <button key={subKey} onClick={() => setActiveSubsection(subKey)} className="course__submenu-item">
                                        {subTitle}
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    {activeSection === 'grammar' && activeSubsection === 'tenses' && !quizMode && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>

                            {!activeTense ? (
                                <>
                                    <h2>{sections.grammar.subsections.tenses}</h2>
                                    <div className="course__submenu">
                                        {Object.keys(grammarTensesContent).map(key => (
                                            <button
                                                key={key}
                                                onClick={() => setActiveTense(key)}
                                                className="course__submenu-item"
                                            >
                                                {key.charAt(0).toUpperCase() + key.slice(1)}
                                            </button>
                                        ))}
                                    </div>
                                </>
                            ) : !activeSubtense ? (
                                <>
                                    <h2>{activeTense.charAt(0).toUpperCase() + activeTense.slice(1)}</h2>
                                    <div className="course__submenu">
                                        {grammarTensesContent[activeTense].map(({ name }) => (
                                            <button
                                                key={name}
                                                onClick={() => setActiveSubtense(name)}
                                                className="course__submenu-item"
                                            >
                                                {name}
                                            </button>
                                        ))}
                                    </div>
                                </>
                            ) : (
                                <>
                                    <h2>{activeSubtense}</h2>

                                    {activeSubtense === 'Past Simple' ? (
                                        <>
                                            <p>
                                                Past Simple використовується для опису дій, які відбулися та завершилися в певний момент у минулому.<br />
                                                <strong>Структура:</strong> Підмет + дієслово в минулій формі (V2).<br />
                                                <strong>Приклади:</strong> I visited Paris last year. They watched a movie yesterday evening.<br />
                                                <strong>Заперечення:</strong> did not + V1 (She did not (didn't) call me).<br />
                                                <strong>Питання:</strong> Did + підмет + V1? (Did you finish your homework?).<br />
                                                <strong>Часові маркери:</strong> yesterday, last week, in 2010, two days ago, when I was a child.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/MI3S3kdkofo"
                                                    title="Past Simple Tense Explanation"
                                                    frameborder="0"
                                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                    allowfullscreen
                                                ></iframe>
                                            </div>
                                            <p class="course__section-underVideo">
                                                Корисні посилання по темі:
                                                <ul>
                                                    <li><a href="https://cambridge.ua/uk/blog/chto-nuzhno-znat-o-past-simple-v-anglyjskom/" target="_blank">1. Past Simple Tense для новачків</a></li>
                                                    <li><a href="https://grammarway.com/ua/past-simple" target="_blank">2. Past simple – Form and use</a></li>
                                                    <li><a href="https://justschool.me/uk/blog/past-simple-shho-cze-take-pravyla-j-tablyczi/" target="_blank">3. Past Simple: що це таке, правила й таблиці</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Past Simple'] && (
                                                <button onClick={startTenseQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Past Continuous' ? (
                                        <>
                                            <p>
                                                Past Continuous використовується для опису дій, які перебували в процесі в певний момент у минулому.<br />
                                                <strong>Структура:</strong> Підмет + was/were + дієслово з закінченням -ing (V-ing).<br />
                                                <strong>Приклади:</strong> I was reading a book at 8 PM yesterday. They were playing football when it started raining.<br />
                                                <strong>Заперечення:</strong> was not / were not + V-ing (He wasn’t watching TV).<br />
                                                <strong>Питання:</strong> Was / Were + підмет + V-ing? (Were you listening to music?).<br />
                                                <strong>Часові маркери:</strong> at 7 o’clock, while, when, all day yesterday, at that moment.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/1iCRD593nu4?si=Jmn4ka2N69gcTjXx"
                                                    title="Past Continuous Tense Explanation"
                                                    frameBorder="0"
                                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання по темі:
                                                <ul>
                                                    <li>
                                                        <a href="https://cambridge.ua/ua/blog/past-continuous" target="_blank">
                                                            1. Past Continuous для початківців
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="https://grammarway.com/ua/past-continuous" target="_blank">
                                                            2. Past Continuous – Form and Use
                                                        </a>
                                                    </li>
                                                    <li>
                                                        <a href="https://bukischool.com.ua/blog/vpravy-na-past-continuous" target="_blank">
                                                            3. Past Continuous: правила й вправи
                                                        </a>
                                                    </li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Past Continuous'] && (
                                                <button onClick={startContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Past Perfect' ? (
                                        <>
                                            <p>
                                                Past Perfect використовується для позначення дії, яка завершилася перед іншою минулою дією.<br />
                                                <strong>Структура:</strong> Підмет + had + дієслово в третій формі (V3).<br />
                                                <strong>Приклади:</strong> They had finished the work before I arrived. She had already left when he called.<br />
                                                <strong>Заперечення:</strong> had not + V3 (They hadn't seen the film).<br />
                                                <strong>Питання:</strong> Had + підмет + V3? (Had you ever been to London?).<br />
                                                <strong>Часові маркери:</strong> by the time, before, after, already, just, never, ever.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/iqSMm0UGLsI?si=eVmkPXqBec-C0ueP"
                                                    title="Past Perfect Tense Explanation"
                                                    frameBorder="0"
                                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання по темі:
                                                <ul>
                                                    <li><a href="https://cambridge.ua/uk/blog/past-perfect" target="_blank">1. Past Perfect для новачків</a></li>
                                                    <li><a href="https://grammarway.com/ua/past-perfect" target="_blank">2. Past Perfect – Form and Use</a></li>
                                                    <li><a href="https://bukischool.com.ua/blog/vpravy-na-past-perfect" target="_blank">3. Past Perfect: правила й вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Past Perfect'] && (
                                                <button onClick={startPerfectQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Past Perfect Continuous' ? (
                                        <>
                                            <p>
                                                Past Perfect Continuous використовується для опису дій, які тривали до певного моменту в минулому.<br />
                                                <strong>Структура:</strong> Підмет + had been + V-ing.<br />
                                                <strong>Приклади:</strong> They had been waiting for an hour when the bus arrived.<br />
                                                <strong>Заперечення:</strong> had not been + V-ing (She hadn’t been sleeping).<br />
                                                <strong>Питання:</strong> Had + підмет + been + V-ing? (Had you been studying all day?).<br />
                                                <strong>Часові маркери:</strong> for…, since…, before…, by the time…
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/Y9Pb9TPnhis?si=a19vM2boJY7eNlvy"
                                                    title="Past Perfect Continuous Explanation"
                                                    frameBorder="0"
                                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання по темі:
                                                <ul>
                                                    <li><a href="https://cambridge.ua/ua/blog/past-perfect-continuous" target="_blank">1. Past Perfect Continuous для початківців</a></li>
                                                    <li><a href="https://grammarway.com/ua/past-perfect-continuous" target="_blank">2. Past Perfect Continuous – Form and Use</a></li>
                                                    <li><a href="https://naurok.com.ua/past-perfect-continuous-408210.html" target="_blank">3. Past Perfect Continuous. Правила й вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Past Perfect Continuous'] && (
                                                <button onClick={startPerfectContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Present Simple' ? (
                                        <>
                                            <p>
                                                Present Simple використовується для опису регулярних дій, звичок і загальних фактів.<br />
                                                <strong>Структура:</strong> Підмет + дієслово в першій формі (для 3-ї особи однини додається закінчення -s).<br />
                                                <strong>Приклади:</strong> She speaks English every day. I go to school on weekdays.<br />
                                                <strong>Заперечення:</strong> do not / does not + V1 (He doesn’t like tea.)<br />
                                                <strong>Питання:</strong> Do / Does + підмет + V1? (Do you play tennis?).<br />
                                                <strong>Часові маркери:</strong> always, usually, often, sometimes, never, every day, on Mondays, twice a week
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/CK7ofUo1dw8?si=68NIT2huaEt-6XXz"
                                                    title="Present Simple Explanation"
                                                    frameBorder="0"
                                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання по темі:
                                                <ul>
                                                    <li><a href="https://grammarway.com/ua/present-simple" target="_blank">1. Present Simple для початківців</a></li>
                                                    <li><a href="https://bukischool.com.ua/blog/present-simple" target="_blank">2. Present Simple – Form and Use</a></li>
                                                    <li><a href="https://naurok.com.ua/vpravi-present-simple-247787.html" target="_blank">3. Present Simple. Правила й вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Past Perfect Continuous'] && (
                                                <button onClick={startPerfectContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Present Continuous' ? (
                                        <>
                                            <p>
                                                Present Continuous використовується для опису дій, які відбуваються в момент мовлення або навколо нього.<br />
                                                <strong>Структура:</strong> Підмет + am/is/are + V-ing.<br />
                                                <strong>Приклади:</strong> I am reading a book now. They are playing football at the moment.<br />
                                                <strong>Заперечення:</strong> am not / is not / are not + V-ing (She isn’t listening).<br />
                                                <strong>Питання:</strong> Am/Is/Are + підмет + V-ing? (Are you watching TV?).<br />
                                                <strong>Часові маркери:</strong> now, right now, at the moment, today, this week.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/AikDr9_BDro?si=3U6Im5gq9Wh2nDgJ"
                                                    title="Present Continuous Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://justschool.me/uk/blog/present-continuous-pravyla-pryklady-vpravy/" target="_blank">1. Present Continuous – правила</a></li>
                                                    <li><a href="https://grammarway.com/ua/present-continuous" target="_blank">2. Present Continuous. Form and Use</a></li>
                                                    <li><a href="https://naurok.com.ua/trenuvalni-vpravi-present-continuous-tense-252941.html" target="_blank">3. Present Continuous. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Present Continuous'] && (
                                                <button onClick={startPresentContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Present Perfect' ? (
                                        <>
                                            <p>
                                                Present Perfect використовується, щоб сказати про досвід, завершені дії з результатом зараз, або дії, що почалися в минулому та тривають.<br />
                                                <strong>Структура:</strong> Підмет + have/has + V3.<br />
                                                <strong>Приклади:</strong> I have visited Paris twice. She has already finished her work.<br />
                                                <strong>Заперечення:</strong> have not / has not + V3 (They haven’t seen that film).<br />
                                                <strong>Питання:</strong> Have/Has + підмет + V3? (Have you ever been to London?).<br />
                                                <strong>Часові маркери:</strong> already, yet, just, never, ever, since, for.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/VjG95ZVW8YA?si=wAZWPLhsp1H7D-4Z"
                                                    title="Present Perfect Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://justschool.me/uk/blog/shho-take-present-perfect-pravyla-vzhyvannya-justschool/" target="_blank">1. Present Perfect – правила</a></li>
                                                    <li><a href="https://grammarway.com/ua/present-perfect" target="_blank">2. Present Perfect. Form and Use</a></li>
                                                    <li><a href="https://naurok.com.ua/the-present-perfect-tense-teperishniy-dokonaniy-chas-trenuvalni-vpravi-356549.html" target="_blank">3. Present Perfect. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Present Perfect'] && (
                                                <button onClick={startPresentPerfectQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Present Perfect Continuous' ? (
                                        <>
                                            <p>
                                                Present Perfect Continuous використовується, щоб підкреслити тривалість дії, яка почалася в минулому і триває досі або щойно закінчилася.<br />
                                                <strong>Структура:</strong> Підмет + have/has been + V-ing.<br />
                                                <strong>Приклади:</strong> I have been studying for two hours. She has been working here since 2015.<br />
                                                <strong>Заперечення:</strong> have not been / has not been + V-ing (They haven’t been waiting).<br />
                                                <strong>Питання:</strong> Have/Has + підмет + been + V-ing? (Have you been learning English?).<br />
                                                <strong>Часові маркери:</strong> for…, since…, all day, recently.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/jo61vDJJMbQ?si=o6YQ5y-61KeZi9h7"
                                                    title="Present Perfect Continuous Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://www.englishdom.com/ua/blog/present-perfect-continuous-osoblivosti-vzhivannya/" target="_blank">1. Present Perfect Continuous – правила</a></li>
                                                    <li><a href="https://grammarway.com/ua/present-perfect-continuous" target="_blank">2. Present Perfect Continuous. Form and Use</a></li>
                                                    <li><a href="https://vseosvita.ua/library/dobirka-vprav-z-gramatiki-present-perfect-continuous-154939.html" target="_blank">3. Present Perfect Continuous. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Present Perfect Continuous'] && (
                                                <button onClick={startPresentPerfectContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Future Simple' ? (
                                        <>
                                            <p>
                                                Future Simple використовується для спонтанних рішень, прогнозів та обіцянок у майбутньому, коли ми виражаємо особисті наміри та короткострокові плани.<br />
                                                <strong>Структура:</strong> Підмет + will + V1.<br />
                                                <strong>Приклади:</strong> I will call you later. They will arrive tomorrow.<br />
                                                <strong>Заперечення:</strong> will not + V1 (He won’t be late).<br />
                                                <strong>Питання:</strong> Will + підмет + V1? (Will you help me?).<br />
                                                <strong>Часові маркери:</strong> tomorrow, next week, in an hour, soon.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/xu0NQtJEEuc?si=qDiggJVqLtIwuRzW"
                                                    title="Future Simple Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://cambridge.ua/ua/blog/future-simple" target="_blank">1. Future Simple – правила</a></li>
                                                    <li><a href="https://grammarway.com/ua/future-simple" target="_blank">2. Future Simple. Form and Use</a></li>
                                                    <li><a href="https://naurok.com.ua/vpravi-na-vidpracyuvannya-maybutnogo-chasu-90826.html" target="_blank">3. Future Simple. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Future Simple'] && (
                                                <button onClick={startFutureSimpleQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Future Continuous' ? (
                                        <>
                                            <p>
                                                Future Continuous використовується для дій, які будуть тривати в певний момент у майбутньому.<br />
                                                <strong>Структура:</strong> Підмет + will be + V-ing.<br />
                                                <strong>Приклади:</strong> I will be working at 8 PM. They will be traveling next week.<br />
                                                <strong>Заперечення:</strong> will not be + V-ing (She won’t be waiting).<br />
                                                <strong>Питання:</strong> Will + підмет + be + V-ing? (Will you be joining us?).<br />
                                                <strong>Часові маркери:</strong> at 7 o’clock tomorrow, this time next week.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/iwy3s3Z-vLA?si=FKuJMC0tCUTfk2kL"
                                                    title="Future Continuous Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://grammarway.com/ua/future-continuous" target="_blank">1. Future Continuous – правила</a></li>
                                                    <li><a href="https://dictionary.cambridge.org/grammar/british-grammar/future-continuous-i-will-be-working" target="_blank">2. Future Continuous. Form and Use</a></li>
                                                    <li><a href="https://naurok.com.ua/vpravi-na-zakriplennya-chasovo-formi-future-continuous-90912.html" target="_blank">3. Future Continuous. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Future Continuous'] && (
                                                <button onClick={startFutureContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Future Perfect' ? (
                                        <>
                                            <p>
                                                Future Perfect використовується для позначення дії, яка завершиться до певного моменту в майбутньому.<br />
                                                <strong>Структура:</strong> Підмет + will have + V3.<br />
                                                <strong>Приклади:</strong> By next month, I will have finished the project.<br />
                                                <strong>Заперечення:</strong> will not have + V3 (They won’t have arrived).<br />
                                                <strong>Питання:</strong> Will + підмет + have + V3? (Will you have completed it by then?).<br />
                                                <strong>Часові маркери:</strong> by tomorrow, by the time, before next week.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/MbJulVjnu2g?si=y6-ECRlL1hM1vG0D"
                                                    title="Future Perfect Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://grammarway.com/ua/future-perfect" target="_blank">1. Future Perfect – правила</a></li>
                                                    <li><a href="https://cambridge.ua/ua/blog/future-perfect" target="_blank">2. Future Perfect. Form and Use</a></li>
                                                    <li><a href="https://bukischool.com.ua/blog/vpravy-na-future-perfect" target="_blank">3. Future Perfect. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Future Perfect'] && (
                                                <button onClick={startFuturePerfectQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : activeSubtense === 'Future Perfect Continuous' ? (
                                        <>
                                            <p>
                                                Future Perfect Continuous використовується для підкреслення тривалості дії до певного моменту в майбутньому.<br />
                                                <strong>Структура:</strong> Підмет + will have been + V-ing.<br />
                                                <strong>Приклади:</strong> By next year, I will have been teaching here for five years.<br />
                                                <strong>Заперечення:</strong> will not have been + V-ing (She won’t have been waiting).<br />
                                                <strong>Питання:</strong> Will + підмет + have been + V-ing? (Will you have been working by then?).<br />
                                                <strong>Часові маркери:</strong> for…, by then, before next month.
                                            </p>
                                            <div className="video-container" style={{ marginTop: '20px' }}>
                                                <iframe
                                                    width="560"
                                                    height="315"
                                                    src="https://www.youtube.com/embed/Tqj1wcweBgI?si=hcgVN0We16hc-WB3"
                                                    title="Future Perfect Continuous Explanation"
                                                    frameBorder="0"
                                                    allowFullScreen
                                                ></iframe>
                                            </div>
                                            <p className="course__section-underVideo">
                                                Корисні посилання:
                                                <ul>
                                                    <li><a href="https://grammarway.com/ua/future-perfect-continuous" target="_blank">1. Future Perfect Continuous – правила</a></li>
                                                    <li><a href="https://dictionary.cambridge.org/grammar/british-grammar/future-perfect-continuous-i-will-have-been-working-here-ten-years" target="_blank">2. Future Perfect Continuous. Form and Use</a></li>
                                                    <li><a href="https://bukischool.com.ua/blog/vpravy-na-future-perfect-continuous" target="_blank">3. Future Perfect Continuous. Вправи</a></li>
                                                </ul>
                                            </p>
                                            {!results.grammar?.['Future Perfect Continuous'] && (
                                                <button onClick={startFuturePerfectContinuousQuiz} className="course__quiz-button">
                                                    Пройти тест
                                                </button>
                                            )}
                                        </>
                                    ) : (
                                        <p>
                                            {grammarTensesContent[activeTense]
                                                .find(item => item.name === activeSubtense)
                                                .description}
                                        </p>
                                    )}
                                </>
                            )}
                        </div>
                    )}

                    {activeSubsection && activeSubsection !== 'tenses' && activeSubsection !== 'articles' && activeSubsection !== 'conditionals' && activeSubsection !== 'beginner' && activeSubsection !== 'advanced' && !activeTopic && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>{sections[activeSection].subsections[activeSubsection]}</h2>

                            {activeSubsection === "vocabulary" && (
                                <div className="course__submenu">
                                    {Object.keys(vocabularyData).map(topic => (
                                        <button
                                            key={topic}
                                            onClick={() => setActiveTopic(topic)}
                                            className="course__submenu-item"
                                        >
                                            {topic}
                                        </button>
                                    ))}
                                </div>
                            )}

                            {activeSubsection === "flashcards" && (
                                <div>
                                    <ul>
                                        <p>1. Розвиваємо пам'ять:</p>
                                        <li><a href="https://happymonday.ua/jak-pokrashhyty-pamjat" target="_blank">Посилання</a></li>
                                        <p>2. Тренування на вимову:</p>
                                        <li><a href="https://youglish.com/" target="_blank">Посилання</a></li>
                                        <p>3. Реальні аудіоуроки з життя:</p>
                                        <li><a href="https://www.eslpod.com/" target="_blank">Посилання</a></li>
                                        <p>4. Вправи на граматику:</p>
                                        <li><a href="https://agendaweb.org/" target="_blank">Посилання</a></li>
                                        <p>5. Збірка вправ для початківців:</p>
                                        <li><a href="https://happymonday.ua/jak-pokrashhyty-pamjat" target="_blank">Посилання</a></li>
                                    </ul>
                                </div>
                            )}
                        </div>
                    )}

                    {activeTopic && !quizMode && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>{activeTopic}</h2>
                            <ul className="vocabulary-list">
                                {vocabularyData[activeTopic].map((word, index) => (
                                    <li key={index}><strong>{word.en}</strong> — {word.ua}</li>
                                ))}
                            </ul>
                            {!(results.words && results.words[activeTopic]) && (
                                <button onClick={startQuiz} className="course__quiz-button">Пройти тест</button>
                            )}
                        </div>
                    )}

                    {(activeSubsection === 'beginner' || activeSubsection === 'advanced') && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>{sections.listening.subsections[activeSubsection]}</h2>

                            <div className="course__audio-wrapper">
                                {listeningData[activeSubsection].map((lesson, index) => {
                                    const currentKey = `${activeSubsection}-${index}`;
                                    const isQuizActive = activeListeningQuiz === currentKey;

                                    return (
                                        <div key={index} className="course__audio-lesson">
                                            <h3>{lesson.title}</h3>
                                            <p>{lesson.description}</p>
                                            <audio controls src={lesson.audioUrl} style={{ width: '100%' }}></audio>

                                            {!results.listening?.[currentKey] ? (
                                                <button
                                                    onClick={() => startListeningQuiz(activeSubsection, index)}
                                                    className="course__quiz-button"
                                                >
                                                    Пройти тест
                                                </button>
                                            ) : (
                                                <p>Тест пройдено ✔️</p>
                                            )}

                                            {/* Якщо цей трек зараз активний для тесту — показати питання */}
                                            {isQuizActive && quizMode && (
                                                <div className="course__quiz-block">
                                                    <h2>Питання {quizIndex + 1} з {quizQuestions.length}</h2>
                                                    <p><strong>Оберіть правильну відповідь:</strong> {quizQuestions[quizIndex].question}</p>
                                                    <div className="quiz-options">
                                                        {quizQuestions[quizIndex].options.map((opt, idx) => {
                                                            let className = "quiz__option-button";
                                                            if (selectedAnswer) {
                                                                if (opt === quizQuestions[quizIndex].correct) className += " correct";
                                                                else if (opt === selectedAnswer) className += " incorrect";
                                                                else className += " disabled";
                                                            }
                                                            return (
                                                                <button
                                                                    key={idx}
                                                                    onClick={() => handleAnswer(opt)}
                                                                    className={className}
                                                                    disabled={!!selectedAnswer}
                                                                >
                                                                    {opt}
                                                                </button>
                                                            );
                                                        })}
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    );
                                })}
                            </div>
                        </div>
                    )}

                    {activeSection === 'grammar' && activeSubsection === 'articles' && !quizMode && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>Артиклі</h2>
                            <p>
                                В англійській є три основні варіанти артиклів:
                                <strong> a / an</strong> (неозначений) – коли ми говоримо про щось вперше, про один із багатьох
                                (“a book”, “an apple”);<br />
                                <strong>the</strong> (означений) – коли ми маємо на увазі конкретний об’єкт, вже відомий співрозмовнику
                                (“the book I told you about”);<br />
                                <strong>—</strong> (відсутність артикля) – перед незлічуваними або іменниками у множині без конкретизації
                                (“water”, “books”).
                            </p>
                            <ul>
                                <li><strong>Неозначений артикль:</strong> a перед приголосним звуком; an перед голосним (“a car”, “an hour”).</li>
                                <li><strong>Означений артикль:</strong> the вживаємо, коли об’єкт вже згаданий або унікальний (“the sun”, “the first time”).</li>
                                <li><strong>Без артикля:</strong> з незлічуваними (“information”) і з іменниками у множині без уточнення (“cars are fast”).</li>
                            </ul>
                            <div className="video-container" style={{ marginTop: '20px' }}>
                                <iframe
                                    width="560"
                                    height="315"
                                    src="https://www.youtube.com/embed/sA6tXGCdG34?si=40eoTKV4gL64XSyR"
                                    title="Articles in English"
                                    frameBorder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowFullScreen
                                ></iframe>
                            </div>
                            <p className="course__section-underVideo">
                                Корисні посилання:
                                <ul>
                                    <li><a href="https://vseosvita.ua/library/vpravi-z-gramatiki-anglijskoi-movi-articles-the-a-an-160994.html" target="_blank">1. Articles – правила та вправи</a></li>
                                    <li><a href="https://justschool.me/uk/blog/artykli-v-anglijskij-movi-pravyla-vykorystannya-vpravy/" target="_blank">2. Articles. Що? Де? Як?</a></li>
                                </ul>
                            </p>
                            {!results.grammar?.['Articles'] && (
                                <button onClick={startArticlesQuiz} className="course__quiz-button">
                                    Пройти тест
                                </button>
                            )}
                        </div>
                    )}

                    {activeSection === 'grammar' && activeSubsection === 'conditionals' && !quizMode && (
                        <div className="course__section">
                            <button onClick={handleBack} className="course__back">⇦ Назад</button>
                            <h2>Умовні речення</h2>
                            <ul>
                                <li>
                                    <p>
                                        В англійській є чотири основні типи умовних речень:
                                    </p>
                                </li>
                                <li>
                                    <strong>Zero Conditional</strong> (загальні істини):
                                    If + Present Simple, Present Simple
                                    (<em>If you heat ice, it melts.</em>).
                                </li>
                                <li>
                                    <strong>First Conditional</strong> (реальні майбутні умови):
                                    If + Present Simple, will + V1
                                    (<em>If it rains tomorrow, we will stay at home.</em>).
                                </li>
                                <li>
                                    <strong>Second Conditional</strong> (нереальні теперішні):
                                    If + Past Simple, would + V1
                                    (<em>If I had a million dollars, I would buy a yacht.</em>).
                                </li>
                                <li>
                                    <strong>Third Conditional</strong> (нереальні минулі):
                                    If + Past Perfect, would have + V3
                                    (<em>If she had known, she would have called you.</em>).
                                </li>
                            </ul>
                            <div className="video-container" style={{ marginTop: '20px' }}>
                                <iframe
                                    width="560"
                                    height="315"
                                    src="https://www.youtube.com/embed/UJWFIAf5Ew8?si=vD8DwVfVn7F7datj"
                                    title="Conditionals in English"
                                    frameBorder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                    allowFullScreen
                                ></iframe>
                            </div>
                            <p className="course__section-underVideo">
                                Корисні посилання:
                                <ul>
                                    <li><a href="https://grammarway.com/ua/conditionals" target="_blank">1. Conditionals – правила</a></li>
                                    <li><a href="https://naurok.com.ua/conditional-sentences-umovni-rechennya-trenuvalni-vpravi-356543.html" target="_blank">2. Conditionals. Інтерактивні вправи</a></li>
                                </ul>
                            </p>
                            {!results.grammar?.['Conditionals'] && (
                                <button onClick={startConditionalsQuiz} className="course__quiz-button">
                                    Пройти тест
                                </button>
                            )}
                        </div>
                    )}

                    {quizMode && quizType !== 'listening' && (
                        <div className="course__section">
                            <h2>Питання {quizIndex + 1} з {quizQuestions.length}</h2>
                            <p><strong>Оберіть правильну відповідь:</strong> {quizQuestions[quizIndex].question}</p>
                            <div className="quiz-options">
                                {quizQuestions[quizIndex].options.map((opt, idx) => {
                                    let className = "quiz__option-button";
                                    if (selectedAnswer) {
                                        if (opt === quizQuestions[quizIndex].correct) className += " correct";
                                        else if (opt === selectedAnswer) className += " incorrect";
                                        else className += " disabled";
                                    }
                                    return (
                                        <button
                                            key={idx}
                                            onClick={() => handleAnswer(opt)}
                                            className={className}
                                            disabled={!!selectedAnswer}
                                        >
                                            {opt}
                                        </button>
                                    );
                                })}
                            </div>
                        </div>
                    )}

                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById('course-root')).render(<CourseApp />);
    </script>
    <script src="./src/js/upArrow.js"></script>
    <script src="./src/js/modal.js"></script>
    <script src="./src/js/hideSection.js"></script>
    <script defer src="./src/js/burger.js"></script>
</body>

</html>